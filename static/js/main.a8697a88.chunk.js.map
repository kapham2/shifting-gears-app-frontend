{"version":3,"sources":["components/SigninForm.js","components/GameCanvas.js","components/Game.js","components/Stats.js","components/CoverContainer.js","App.js","serviceWorker.js","index.js"],"names":["SigninForm","onSubmitForm","e","username","password","preventDefault","target","querySelector","value","toLowerCase","_this","props","active","authenticate","signUp","console","log","fetch","method","headers","Content-type","body","JSON","stringify","user","then","response","ok","json","setUserAndRedirect","catch","updateUserId","id","localStorage","setItem","token","updateNav","includes","test","error","updateSignedIn","updateActive","document","getElementsByClassName","classList","remove","add","clear","this","input","react_default","a","createElement","type","className","placeholder","name","required","autoFocus","onSubmit","React","Component","GameCanvas","drawGame","context","img","clearRect","canvas","width","height","translate","drawElevation","drawCyclist","drawTick","drawVelocityScale","yElevationFirst","elevation","elevationScale","yElevationLast","indexLast","beginPath","moveTo","lineTo","forEach","index","xDistance","distanceToIndexRatio","distanceScale","imgWidth","yElevation","fillStyle","fill","font","textAlign","fillText","concat","time","Math","round","distance","strokeStyle","lineWidth","stroke","i","velocityMax","length","idxTeethCog","velocity","xStart","max","apply","Object","toConsumableArray","updateFrame","frame","xTranslate","yTranslate","elevationAndSlope","angle","atan","slope","rotate","xSrc","x","y","drawImage","spriteWidth","_this2","contextScale","distanceTotal","refs","gameCanvas","style","getContext","scale","Image","src","process","timer","setInterval","clearInterval","ref","Game","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","startTimer","setState","start","Date","now","grade","milliseconds","state","getDistance","getVelocity","getElevationAndSlope","stopTimer","createGame","getElementById","disabled","avgVelocity","Authorization","getItem","game","user_id","userId","avg_velocity","resetTimer","onClickStart","getVelocityMax","teethChainring","teethCog","radiusTire","getAcceleration","forcePedal","lengthCrankArm","massBikeAndRider","sin","Cr","cos","Cd","ARider","rho","pow","acceleration","onClickShiftUp","onClickShiftDown","distanceIntervals","previousIndex","floor","nextIndex","ceil","previousDistance","nextDistance","previousElevation","lastIndex","nextLastIndex","lastDistance","nextLastDistance","lastElevation","cadence","gearRatio","elevations","random","GameCanvas_GameCanvas","onClick","Stats","_isMounted","stats","Content-Type","rank","scope","map","stat","key","CoverContainer","signedIn","onClickNav","newActive","oldActive","getAttribute","onClickLogout","nav","main_content","components_Game","components_Stats","components_SigninForm","alt","role","App","components_CoverContainer","Boolean","window","location","hostname","match","ReactDOM","render","src_App_0","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.a8697a88.chunk.js","sourcesContent":["import React from 'react'\nimport '../signin.css'\n\nclass SigninForm extends React.Component {\n\n  componentDidMount() {\n    localStorage.clear()\n    this.props.updateActive(\"Sign in\")\n    document.getElementsByClassName(\"nav-link active\")[0].classList.remove(\"active\")\n    document.getElementsByClassName(\"nav-link\")[0].classList.add(\"active\")\n  }\n\n  onSubmitForm = (e) => {\n    e.preventDefault()\n\n    let username\n    let password\n\n    if (e.target.querySelector('input')) {\n      username = e.target.querySelector('input[name=\"username\"]').value.toLowerCase()\n      password = e.target.querySelector('input[name=\"password\"]').value\n    }\n\n    switch(this.props.active) {\n      case \"Sign in\":\n        this.authenticate(username, password)\n        break\n      case \"Sign up\":\n        this.signUp(username, password)\n        break\n      case \"Use Incognito Mode\":\n        this.authenticate(\"incognito\", \"p@$$w0rd\")\n        break\n      default:\n        console.log(\"SigninForm: onSubmitForm => ERROR!\")\n        break\n    }\n  }\n\n  authenticate = (username, password) => {\n    console.log(\"authenticated!\")\n    fetch('https://shifting-gears-app-backend.herokuapp.com/api/v1/signin', {\n      method: 'POST',\n      headers: { 'Content-type' : 'application/json' },\n      body: JSON.stringify({\n        user: {\n          username: username,\n          password: password\n        }\n      })\n    })\n    .then(response => {\n      if (response.ok) {\n        return response.json()\n      }\n      else {\n        throw response\n      }\n    })\n    .then(response => this.setUserAndRedirect(response))\n    .catch(response => response.json().then(response => console.log(response)))\n  }\n      \n  setUserAndRedirect = (response) => {\n    this.props.updateUserId(response.user.id)\n    localStorage.setItem('token', response.token)\n    this.updateNav()\n  }\n\n  signUp = (username, password) => {\n    console.log(\"signed up!\")\n    if (username.includes(\" \") || /[~`!@#$%^&*()\\-+={[}\\]|\\\\:;\"'<,>.?/]/g.test(username)) {\n      console.log({error: \"Username can't include special characters\"})\n    }\n    else\n    {\n      fetch('https://shifting-gears-app-backend.herokuapp.com/api/v1/users', {\n        method: 'POST',\n        headers: { 'Content-type' : 'application/json' },\n        body: JSON.stringify({\n          user: {\n            username: username,\n            password: password\n          }\n        })\n      })\n      .then(response => {\n        if (response.ok) {\n          return response.json()\n        }\n        else {\n          throw response\n        }\n      })\n      .then(response => this.setUserAndRedirect(response))\n      .catch(response => response.json().then(response => console.log(response)))\n    }\n  }\n\n  updateNav = () => {\n    this.props.updateSignedIn()\n    this.props.updateActive(\"Game\")\n    document.getElementsByClassName(\"nav-link active\")[0].classList.remove(\"active\")\n    document.getElementsByClassName(\"nav-link\")[0].classList.add(\"active\")\n  }\n\n  render() {\n    // console.log(\"SigninForm: this.props => \", this.props)\n    const input = this.props.active === \"Use Incognito Mode\" \n      ? \"\" \n      : (\n        <div>\n          <input type=\"text\" id=\"inputUsername\" className=\"form-control\" placeholder=\"Username\" name=\"username\"required autoFocus />\n          <input type=\"password\" id=\"inputPassword\" className=\"form-control\" placeholder=\"Password\" name=\"password\" required />\n        </div>\n        )\n\n    return(\n      <form className=\"form-signin\" onSubmit={this.onSubmitForm}>\n        { input }\n        <button className=\"btn shadow-sm btn-block\" type=\"submit\">{this.props.active}</button>\n      </form>\n    )\n  }\n}\n\nexport default SigninForm","import React, { Component } from 'react';\n\nexport default class GameCanvas extends Component {\n  componentDidMount() {\n    this.width = 300\n    this.height = 100\n    this.imgWidth = 50\n    this.contextScale = 10\n    this.elevationScale = 10\n    this.frame = 0\n\n    this.indexLast = this.props.elevation.length - 1\n    this.distanceTotal = this.indexLast * this.props.distanceToIndexRatio\n    this.distanceScale = (this.width - this.imgWidth) / this.distanceTotal\n\n    const canvas = this.refs.gameCanvas\n    canvas.width = this.width * this.contextScale\n    canvas.height = (this.height + 100) * this.contextScale\n    canvas.style.width = `${this.width}px`\n    canvas.style.height = `${this.height + 100}px`\n    \n    const context = canvas.getContext(\"2d\")\n    context.scale(this.contextScale, this.contextScale)\n    \n    const img = new Image()\n    img.src = `${process.env.PUBLIC_URL + \"/cyclist-sprite-sheet.png\"}`\n    this.spriteWidth = 400\n\n    this.timer = setInterval(() => this.drawGame(context, img), 50)\n  }\n\n  drawGame = (context, img) => {\n    context.clearRect(0, 0, context.canvas.width, context.canvas.height)\n    context.translate(0, this.height)\n\n    this.drawElevation(context)\n    \n    this.drawCyclist(context, img)\n    \n    this.drawTick(context)\n\n    this.drawVelocityScale(context)\n    \n    context.translate(0, -this.height)\n  }\n  \n  drawElevation = (context) => {\n    const yElevationFirst = -this.props.elevation[0] * this.elevationScale\n    const yElevationLast = -this.props.elevation[this.indexLast] * this.elevationScale\n    \n    context.beginPath();\n    context.moveTo(0, 0);\n    context.lineTo(0, yElevationFirst);\n\n    this.props.elevation.forEach((elevation, index) => {\n      const xDistance = index * this.props.distanceToIndexRatio * this.distanceScale + this.imgWidth / 2\n      const yElevation = -elevation * this.elevationScale\n      return context.lineTo(xDistance, yElevation);\n    })\n\n    context.lineTo(this.width, yElevationLast);\n    context.lineTo(this.width, 0);\n    context.fillStyle = \"#566E7A\"\n    context.fill();\n  }\n\n  drawVelocityScale = (context) => {\n    context.font = \"bold 18px Helvetica Neue\";\n    context.textAlign = \"left\"\n    context.fillStyle = \"#FFFFFF\"\n    context.fillText(`Score: ${this.props.time === 0 ? 0 : Math.round(this.props.distance / (this.props.time / 1000) * 100) / 100}`, this.width / 2, -85)\n\n    context.beginPath()\n    context.moveTo(0, 60)\n    context.lineTo(this.width, 60)\n    context.strokeStyle = \"#192D4BF2\";\n    context.lineWidth = 3;\n    context.stroke()\n\n    context.textAlign = \"center\"\n    context.fillText(\"Max Velocity in Current Gear\", this.width / 2, 40)\n\n    for (let i = 0; i < this.props.velocityMax.length; i++) {\n      context.beginPath()\n      context.moveTo(this.props.velocityMax[i] * 25, 70)\n      context.lineTo(this.props.velocityMax[i] * 25, 50)\n      context.strokeStyle = i === this.props.idxTeethCog ? \"#FFFFFF\" : \"#192D4BF2\";\n      context.lineWidth = 3;\n      context.stroke()\n    }\n\n    context.beginPath()\n    context.moveTo(this.props.velocity * 25, 70)\n    context.lineTo(this.props.velocity * 25, 50)\n    context.strokeStyle = \"#D20155\";\n    context.lineWidth = 3;\n    context.stroke()\n    context.fillStyle = \"#D20155\"\n    context.fillText(`Current Velocity: ${Math.round(this.props.velocity * 100) / 100}`, this.width / 2, 90)\n  }\n\n  drawTick = (context) => {\n    context.beginPath()\n    const xStart = this.props.distance * this.distanceScale + this.imgWidth / 2\n    context.moveTo(xStart, 0)\n    context.lineTo(xStart, -Math.max(...this.props.elevation) * this.elevationScale)\n    context.strokeStyle = \"#D20155\";\n    context.lineWidth = 2;\n    context.stroke()\n\n  }\n\n  updateFrame = () =>{\n    //Updating the frame index \n    if (this.frame + 1 > 19) {\n      this.frame = 0\n    }\n    else {\n      this.frame = (this.frame + 1); \n    }\n    \n    //Calculating the x coordinate for spritesheet \n    return this.frame * 400; \n  }\n\n  drawCyclist = (context, img) => {\n    // translate canvas origin to point of rotation\n    const xTranslate = this.props.distance * this.distanceScale + this.imgWidth / 2\n    const yTranslate = -(this.props.elevationAndSlope.elevation * this.elevationScale)\n    context.translate(xTranslate, yTranslate);\n\n    const angle = -Math.atan(this.props.elevationAndSlope.slope * this.elevationScale / this.distanceScale)\n    context.rotate(angle)\n\n    const xSrc = this.props.img === \"/cyclist.png\" ? 0 : this.updateFrame()\n\n    // position top left point of image so that bottom middle of the image is at origin\n    const x = -this.imgWidth / 2\n    const y = -this.imgWidth\n    context.drawImage(img, xSrc, 0, this.spriteWidth, this.spriteWidth, x, y, this.imgWidth, this.imgWidth);\n    \n    context.rotate(-angle)\n    context.translate(-xTranslate, -yTranslate);\n  }\n\n  componentWillUnmount () {\n    clearInterval(this.timer)\n  }\n\n  render() {\n    if (this.props.distance > 100) {\n      clearInterval(this.timer)\n    }\n\n    return (\n      <canvas ref=\"gameCanvas\"/>\n    )\n  }\n}","import React from 'react'\n// import Chart from './Chart'\nimport GameCanvas from './GameCanvas'\n\nclass Game extends React.Component {\n\n  constructor() {\n    super()\n\n    this.cadence = 1 // s (60RPM)\n    this.forcePedal = 125 // N\n    this.lengthCrankArm = 165 //mm\n    this.radiusTire = 700 / 2 //mm\n    this.massBikeAndRider = 160 //kg\n    this.Cr = 0.004 // (coefficient of rolling friction)\n    this.Cd = 1 // (coefficient of drag)\n    this.ARider = 0.4 //m2 (frontal area of rider)\n    this.rho = 1.225 //kg/m3 (air density)\n    this.teethCog = [32, 28, 25, 22, 20, 18, 16, 14, 13, 12, 11, 9.4/*, 8.6, 8, 7.3*/]\n\n    this.gearRatio = []\n    for (let i = 0; i < this.teethCog.length; i++) {\n      this.gearRatio = this.gearRatio.concat([Math.round(32 / this.teethCog[i] * 10) / 10])\n    }\n    // console.log(\"Gear Ratio:\", this.gearRatio)\n\n    this.velocityMax = []\n    for (let i = 0; i < this.gearRatio.length; i++) {\n      this.velocityMax = this.velocityMax.concat([Math.round(this.gearRatio[i] * 2 * 3.14 * this.radiusTire / 1000 * 100) / 100])\n    }\n    // console.log(\"Max Velocity:\", this.velocityMax)\n\n    const elevations = [[1, 1], [2, 2], [3, 3]]\n    let elevation = [1, 1, 1]\n    for (let i = 0; i < 3; i++) {\n      elevation = elevation.concat(elevations[Math.round(Math.random() * (2))])\n    }\n    this.elevation = elevation.concat([1, 1])\n\n    this.distanceToIndexRatio = 10\n\n    this.state = {\n      time: 0,\n      start: Date.now(),\n      distance: 0, //m\n      velocity: 0, //m/s\n      teethChainring: 32,\n      idxTeethCog: 0,\n      grade: 0, //deg\n      img: \"/cyclist.png\"\n    }\n  }\n\n  startTimer = () => {\n    // console.log(\"start\")\n    this.setState({\n      start: Date.now(),\n      distance: 0,\n      velocity: 0,\n      idxTeethCog: 0,\n      grade: 0,\n      img: \"/cyclist.gif\"\n    })\n\n    this.milliseconds = 1000 / 4\n    this.timer = setInterval(() => this.setState({ \n      time: Date.now() - this.state.start,\n      distance: this.getDistance(this.milliseconds),\n      velocity: this.getVelocity(),\n      grade: this.getElevationAndSlope().slope * 0.1\n    }), this.milliseconds)\n  }\n\n  stopTimer = () => {\n    // console.log(\"stop\")\n\n    this.createGame()\n\n    clearInterval(this.timer)\n    \n    document.getElementById(\"shift-up-btn\").disabled = true\n    document.getElementById(\"shift-down-btn\").disabled = true\n  }\n  \n  createGame = () => {    \n    let avgVelocity\n\n    if (this.state.distance === 0 && this.state.time === 0) {\n      avgVelocity = 0\n    }\n    else {\n      avgVelocity = this.state.distance / (this.state.time / 1000)\n    }\n    // console.log(\"avgVelocity\", avgVelocity)\n\n    fetch('https://shifting-gears-app-backend.herokuapp.com/api/v1/games', {\n      method: 'POST',\n      headers: {\n        'Content-type' : 'application/json',\n        'Authorization' : `Bearer ${localStorage.getItem(\"token\")}`\n      },\n      body: JSON.stringify({\n        game: {\n          user_id: this.props.userId,\n          distance: this.state.distance, //m\n          time: this.state.time / 1000, //s\n          avg_velocity: avgVelocity, //m/s\n        }\n      })\n    })\n    .then(response => {\n      if (response.ok) {\n        return response.json()\n      }\n      else {\n        throw response\n      }\n    })\n    // .then(response => console.log(response))\n    .catch(response => response.json().then(response => console.log(response)))\n  }\n\n  resetTimer = () => {\n    // console.log(\"reset\")\n    this.setState({ time: 0 })\n  }\n\n  onClickStart = (e) => {\n    if (this.state.time === 0) {\n      document.getElementById(\"start-btn\").disabled = true\n      // document.getElementById(\"acceleration-p\").classList.remove(\"hide-p\")\n      // document.getElementById(\"velocity-p\").classList.remove(\"hide-p\")\n      this.startTimer()\n    }\n  }\n\n  componentWillUnmount () {\n    clearInterval(this.timer)\n  }\n\n  getVelocityMax = () => {\n    return (this.state.teethChainring / this.teethCog[this.state.idxTeethCog]) * 2 * 3.14 * this.radiusTire / 1000\n  }\n  \n  getAcceleration = () => {\n    const forceForward = this.forcePedal * (this.lengthCrankArm * this.teethCog[this.state.idxTeethCog]) / (this.state.teethChainring * this.radiusTire)\n  \n    const forceResistGravity = -(this.massBikeAndRider * 9.81 * Math.sin(Math.atan(this.state.grade)))\n    const forceResistRolling = -(this.Cr * this.massBikeAndRider * 9.81 * Math.cos(Math.atan(this.state.grade)))\n    const forceResistDrag = -(0.5 * this.Cd * this.ARider * this.rho * this.state.velocity ** 2)\n    const forceResist = forceResistGravity + forceResistRolling + forceResistDrag\n  \n    const forceNet = forceForward + forceResist\n\n    return forceNet / this.massBikeAndRider\n  }\n\n  getVelocity = () => {\n    const velocityMax = this.getVelocityMax()\n    const acceleration = this.getAcceleration()\n    const velocity = this.state.velocity\n\n    if (this.state.grade >= 0) {\n      if (velocity + acceleration <= 0 && acceleration < 0) {\n        // console.log(\"end game; velocity < 0 && acceleration < 0\")\n        this.setState({ img: \"/cyclist.png\" })\n        this.stopTimer()\n        return 0\n      }\n      else if (velocity + acceleration <= 0) {\n        // console.log(\"change to a lower gear\")\n        return 0        \n      }\n      else if (velocity + acceleration < velocity) {\n        // console.log(\"change to a lower gear\")\n        return velocity + acceleration\n      }\n      else if (velocity + acceleration <= velocityMax) {\n        // console.log(\"OK\")\n        return velocity + acceleration\n      }\n      else {\n        // console.log(\"change to a higher gear\")\n        return velocityMax\n      }\n    }\n    else {\n      if (velocity + acceleration >= velocityMax){\n        // console.log(\"change to a higher gear\")\n        return velocity + acceleration\n      }\n      else {\n        // console.log(\"OK\")\n        return velocity + acceleration\n      }\n    }\n  }\n\n  getDistance = (milliseconds) => {\n    const nextDistance = this.state.distance + this.state.velocity * milliseconds / 1000\n\n    if (nextDistance >= 100) {\n      // console.log(\"end game; distance > 100m\")\n      this.setState({ img: \"/cyclist.png\"})\n      this.stopTimer()\n    }\n\n    return this.state.distance + this.state.velocity * milliseconds / 1000\n  }\n\n  onClickShiftUp = () => {\n    if (this.state.time > 0) {\n      \n      if (this.state.idxTeethCog + 1 < this.teethCog.length) {\n        // console.log(\"shift up\")\n        this.setState({\n          idxTeethCog: this.state.idxTeethCog + 1\n        })\n      }\n\n    }\n  }\n\n  onClickShiftDown = () => {\n    if (this.state.time > 0) {\n      \n      if (this.state.idxTeethCog - 1 >= 0) {\n        // console.log(\"shift down\")\n        this.setState({\n          idxTeethCog: this.state.idxTeethCog - 1\n        })\n      }\n\n    }\n  }\n\n  getElevationAndSlope = () => {\n    \n    if (this.state.distance !== 0) {\n      const distanceIntervals = this.elevation.length - 1\n      \n      const previousIndex = Math.floor(this.state.distance / distanceIntervals)\n      const nextIndex = Math.ceil(this.state.distance / distanceIntervals)\n      \n      if (this.state.distance < 100) {\n        const previousDistance = previousIndex * this.distanceToIndexRatio\n        const nextDistance = nextIndex * this.distanceToIndexRatio\n        \n        const previousElevation = this.elevation[previousIndex]\n        const nextElevation = this.elevation[nextIndex]\n    \n        const distanceDiff = nextDistance - previousDistance\n        const elevationDiff = nextElevation - previousElevation\n\n        const slope = elevationDiff / distanceDiff\n\n        const elevation = slope * (this.state.distance - previousDistance) + previousElevation\n\n        return { elevation: elevation, slope: slope }\n      }\n      else {\n        const lastIndex = this.elevation.length - 1\n        const nextLastIndex = lastIndex - 1\n\n        const lastDistance = lastIndex * this.distanceToIndexRatio\n        const nextLastDistance = nextLastIndex * this.distanceToIndexRatio\n\n        const lastElevation = this.elevation[lastIndex]\n        const nextLastElevation = this.elevation[nextLastIndex]\n\n        const distDiff = lastDistance - nextLastDistance\n        const elevDiff = lastElevation - nextLastElevation\n\n        const lastSlope = elevDiff / distDiff\n\n        return { elevation: lastElevation, slope: lastSlope }\n      }\n    }\n    else {\n      return { elevation: 1, slope: 0 }\n    }\n    \n  }\n\n  render() {\n    // console.log(\"this.state\", this.state)\n\n    // const imgCyclistStyle = {\n    //   left: -115 + this.state.distance * 2.35,\n    //   top: 40 - this.getElevationAndSlope().elevation * 9.25,\n    //   transform: `rotate(${-Math.atan(this.getElevationAndSlope().slope) * 9.25 / 2.35}rad)`,\n    // }\n\n    return (\n      <div>\n          {/* <img className=\"img-cyclist\" src={process.env.PUBLIC_URL + this.state.img} style={imgCyclistStyle} alt=\"\" /> */}\n          {/* <Chart distance={this.state.distance} elevation={this.elevation} distanceToIndexRatio={this.distanceToIndexRatio} /> */}\n          <GameCanvas elevationAndSlope={this.getElevationAndSlope()} distance={this.state.distance} elevation={this.elevation} distanceToIndexRatio={this.distanceToIndexRatio} img={this.state.img} velocityMax={this.velocityMax} velocity={this.state.velocity} idxTeethCog={this.state.idxTeethCog} time={this.state.time} />\n          <p>\n            <button className=\"btn shadow-sm btn-sm\" id=\"start-btn\" onClick={this.onClickStart}>Start</button>{\" \"}\n            <button className=\"btn shadow-sm btn-sm shift-btn\" id=\"shift-up-btn\" onClick={this.onClickShiftUp}>Shift Up</button>{\" \"}\n            <button className=\"btn shadow-sm btn-sm shift-btn\" id=\"shift-down-btn\" onClick={this.onClickShiftDown}>Shift Down</button>\n          </p>\n          {/* <p className=\"hide-p\" id=\"acceleration-p\">acc = {Math.round(this.getAcceleration() * 100) / 100} m/s<sup>2</sup></p> */}\n          {/* <p className=\"hide-p\" id=\"velocity-p\">v<sub>i</sub> = {Math.round(this.state.velocity * 100) / 100} m/s (v<sub>max</sub> = {Math.round(this.getVelocityMax() * 100) / 100} m/s)</p> */}\n      </div>\n    )\n  }\n}\n\nexport default Game","import React from 'react'\n\nclass Stats extends React.Component {\n\n  constructor() {\n    super()\n\n    this._isMounted = false\n\n    this.state = { stats: [] }\n  }\n\n  componentDidMount() {\n    this._isMounted = true\n    fetch('https://shifting-gears-app-backend.herokuapp.com/api/v1/games/top-10', {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization' : `Bearer ${localStorage.getItem(\"token\")}`\n      }\n    })\n    .then(response => response.json())\n    .then(response => this._isMounted ? this.setState({ stats: response }) : null)\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false\n  }\n\n  render() {\n    let rank = 0\n\n    return (\n      <div>\n        <table className=\"table table-sm table-striped table-dark\">\n          <thead>\n            <tr>\n              <th scope=\"col\">#</th>\n              <th scope=\"col\">Name</th>\n              <th scope=\"col\">Score</th>\n            </tr>\n          </thead>\n          <tbody>\n            {\n              this.state.stats.map((stat) => {\n                rank = rank + 1\n                return (\n                  <tr key={stat.id}>\n                    <th scope=\"row\">{rank}</th>\n                    <td>{stat.user.username}</td>\n                    <td>{Math.round(stat.avg_velocity * 100) / 100}</td>\n                  </tr>\n                )\n              })\n            }\n          </tbody>\n        </table>\n      </div>\n    )\n  }\n}\n\nexport default Stats","import React from 'react'\nimport '../cover.css'\nimport SigninForm from './SigninForm'\nimport Game from './Game'\nimport Stats from './Stats'\n\nclass CoverContainer extends React.Component {\n\n  state = {\n    active: \"Sign in\",\n    signedIn: false,\n    // active: \"Game\",\n    // signedIn: true,\n    userId: 0\n  }\n\n  onClickNav = (e) => {\n    const newActive = e.target\n    const oldActive = document.getElementsByClassName(\"nav-link active\")[0]\n    \n    if (newActive !== oldActive) {\n      oldActive.classList.remove(\"active\")\n      newActive.classList.add(\"active\")\n      this.updateActive(newActive.getAttribute(\"name\"))\n    }\n  }\n\n  updateActive = (newActive) => {\n    this.setState({ active: newActive })\n  }\n\n  updateSignedIn = () => {\n    this.setState({ signedIn: !this.state.signedIn })\n  }\n\n  onClickLogout = (e) => {\n    this.setState({\n      active: \"Sign in\",\n      signedIn: !this.state.signedIn,\n      userId: 0\n    })\n    document.getElementsByClassName(\"nav-link active\")[0].classList.remove(\"active\")\n    document.getElementsByClassName(\"nav-link\")[0].classList.add(\"active\")\n    localStorage.clear()\n  }\n\n  updateUserId = (userId) => {\n    this.setState({ userId: userId })\n  }\n\n  render() {\n    // console.log(\"CoverContainer: this.state => \", this.state)\n    const nav = !this.state.signedIn\n      ? (\n        <nav className=\"nav nav-masthead justify-content-center\">\n          <div className=\"nav-link active\" name=\"Sign in\" onClick={this.onClickNav}>Sign in</div>\n          <div className=\"nav-link\" name=\"Sign up\" onClick={this.onClickNav}>Sign up</div>\n          <div className=\"nav-link\" name=\"Use Incognito Mode\" onClick={this.onClickNav}>Incognito</div>\n        </nav>\n      )\n      : (\n        <nav className=\"nav nav-masthead justify-content-center\">\n          <div className=\"nav-link active\" name=\"Game\" onClick={this.onClickNav}>Game</div>\n          <div className=\"nav-link\" name=\"Stats\" onClick={this.onClickNav}>Stats</div>\n          <div className=\"nav-link\" name=\"Log out\" onClick={this.onClickLogout}>Log out</div>\n        </nav>\n      )\n\n      const main_content = !this.state.signedIn\n      ? <SigninForm active={this.state.active} updateSignedIn={this.updateSignedIn} updateActive={this.updateActive} updateUserId={this.updateUserId} />\n      : this.state.active === \"Game\" ? <Game updateActive={this.updateActive} userId={this.state.userId} /> : <Stats />\n\n    return (\n      <div className=\"cover-container d-flex w-100 h-100 p-2 mx-auto flex-column\">\n        <header className=\"masthead mb-auto\">\n          <div className=\"inner\">\n            <h4 className=\"masthead-brand\">\n              <img className=\"img-icon\" src={process.env.PUBLIC_URL + \"/icon.png\"} alt=\"\" /> Shifting Gears\n            </h4>\n            { nav }\n          </div>\n        </header>\n\n        <div className=\"d-flex justify-content-center\">\n          <main role=\"main\" className=\"inner cover\">\n            { main_content }\n          </main>\n        </div>\n\n        <footer className=\"mastfoot mt-auto\">\n          <div className=\"inner\">\n            {/* <p>Photo by Tim Foster | App by Kim Pham</p> */}\n          </div>\n        </footer>\n      </div>    \n    )\n  }\n}\n\nexport default CoverContainer","import React, { Component } from 'react';\nimport './App.css';\nimport '../node_modules/bootstrap/dist/css/bootstrap.css'\nimport CoverContainer from './components/CoverContainer'\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"App\">\n          <CoverContainer />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}