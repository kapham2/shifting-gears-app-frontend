{"version":3,"sources":["components/SigninForm.js","components/GameCanvas.js","components/Game.js","components/Stats.js","components/CoverContainer.js","App.js","serviceWorker.js","index.js"],"names":["SigninForm","onSubmitForm","e","username","password","preventDefault","target","querySelector","value","toLowerCase","_this","props","active","authenticate","signUp","console","log","fetch","method","headers","Content-type","body","JSON","stringify","user","then","response","ok","json","setUserAndRedirect","catch","updateUserId","id","localStorage","setItem","token","updateNav","includes","test","error","updateSignedIn","updateActive","document","getElementsByClassName","classList","remove","add","clear","this","input","react_default","a","createElement","type","className","placeholder","name","required","autoFocus","onSubmit","React","Component","GameCanvas","drawGame","context","img","clearRect","canvas","width","height","translate","drawElevation","drawCyclist","drawTick","yElevationFirst","elevation","elevationScale","yElevationLast","indexLast","beginPath","moveTo","lineTo","forEach","index","xDistance","distanceToIndexRatio","distanceScale","imgWidth","yElevation","fillStyle","fill","xStart","distance","Math","max","apply","Object","toConsumableArray","strokeStyle","lineWidth","stroke","updateFrame","frame","xTranslate","yTranslate","elevationAndSlope","angle","atan","slope","rotate","xSrc","x","y","drawImage","spriteWidth","_this2","contextScale","length","distanceTotal","refs","elevationGraph","style","concat","getContext","scale","Image","src","process","timer","setInterval","clearInterval","ref","Game","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","startTimer","setState","start","Date","now","velocity","idxTeethCog","grade","milliseconds","time","state","getDistance","getVelocity","getElevationAndSlope","stopTimer","createGame","getElementById","disabled","avgVelocity","Authorization","getItem","game","user_id","userId","avg_velocity","resetTimer","onClickStart","getVelocityMax","teethChainring","teethCog","radiusTire","getAcceleration","forcePedal","lengthCrankArm","massBikeAndRider","sin","Cr","cos","Cd","ARider","rho","pow","velocityMax","acceleration","onClickShiftUp","onClickShiftDown","distanceIntervals","previousIndex","floor","nextIndex","ceil","previousDistance","nextDistance","previousElevation","lastIndex","nextLastIndex","lastDistance","nextLastDistance","lastElevation","cadence","elevations","i","round","random","GameCanvas_GameCanvas","onClick","Stats","_isMounted","stats","Content-Type","rank","scope","map","stat","key","CoverContainer","signedIn","onClickNav","newActive","oldActive","getAttribute","onClickLogout","nav","main_content","components_Game","components_Stats","components_SigninForm","alt","role","App","components_CoverContainer","Boolean","window","location","hostname","match","ReactDOM","render","src_App_0","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.ef6c2510.chunk.js","sourcesContent":["import React from 'react'\nimport '../signin.css'\n\nclass SigninForm extends React.Component {\n\n  componentDidMount() {\n    localStorage.clear()\n    this.props.updateActive(\"Sign in\")\n    document.getElementsByClassName(\"nav-link active\")[0].classList.remove(\"active\")\n    document.getElementsByClassName(\"nav-link\")[0].classList.add(\"active\")\n  }\n\n  onSubmitForm = (e) => {\n    e.preventDefault()\n\n    let username\n    let password\n\n    if (e.target.querySelector('input')) {\n      username = e.target.querySelector('input[name=\"username\"]').value.toLowerCase()\n      password = e.target.querySelector('input[name=\"password\"]').value\n    }\n\n    switch(this.props.active) {\n      case \"Sign in\":\n        this.authenticate(username, password)\n        break\n      case \"Sign up\":\n        this.signUp(username, password)\n        break\n      case \"Use Incognito Mode\":\n        this.authenticate(\"incognito\", \"p@$$w0rd\")\n        break\n      default:\n        console.log(\"SigninForm: onSubmitForm => ERROR!\")\n        break\n    }\n  }\n\n  authenticate = (username, password) => {\n    console.log(\"authenticated!\")\n    fetch('https://shifting-gears-app-backend.herokuapp.com/api/v1/signin', {\n      method: 'POST',\n      headers: { 'Content-type' : 'application/json' },\n      body: JSON.stringify({\n        user: {\n          username: username,\n          password: password\n        }\n      })\n    })\n    .then(response => {\n      if (response.ok) {\n        return response.json()\n      }\n      else {\n        throw response\n      }\n    })\n    .then(response => this.setUserAndRedirect(response))\n    .catch(response => response.json().then(response => console.log(response)))\n  }\n      \n  setUserAndRedirect = (response) => {\n    this.props.updateUserId(response.user.id)\n    localStorage.setItem('token', response.token)\n    this.updateNav()\n  }\n\n  signUp = (username, password) => {\n    console.log(\"signed up!\")\n    if (username.includes(\" \") || /[~`!@#$%^&*()\\-+={[}\\]|\\\\:;\"'<,>.?/]/g.test(username)) {\n      console.log({error: \"Username can't include special characters\"})\n    }\n    else\n    {\n      fetch('https://shifting-gears-app-backend.herokuapp.com/api/v1/users', {\n        method: 'POST',\n        headers: { 'Content-type' : 'application/json' },\n        body: JSON.stringify({\n          user: {\n            username: username,\n            password: password\n          }\n        })\n      })\n      .then(response => {\n        if (response.ok) {\n          return response.json()\n        }\n        else {\n          throw response\n        }\n      })\n      .then(response => this.setUserAndRedirect(response))\n      .catch(response => response.json().then(response => console.log(response)))\n    }\n  }\n\n  updateNav = () => {\n    this.props.updateSignedIn()\n    this.props.updateActive(\"Game\")\n    document.getElementsByClassName(\"nav-link active\")[0].classList.remove(\"active\")\n    document.getElementsByClassName(\"nav-link\")[0].classList.add(\"active\")\n  }\n\n  render() {\n    // console.log(\"SigninForm: this.props => \", this.props)\n    const input = this.props.active === \"Use Incognito Mode\" \n      ? \"\" \n      : (\n        <div>\n          <input type=\"text\" id=\"inputUsername\" className=\"form-control\" placeholder=\"Username\" name=\"username\"required autoFocus />\n          <input type=\"password\" id=\"inputPassword\" className=\"form-control\" placeholder=\"Password\" name=\"password\" required />\n        </div>\n        )\n\n    return(\n      <form className=\"form-signin\" onSubmit={this.onSubmitForm}>\n        { input }\n        <button className=\"btn shadow-sm btn-block\" type=\"submit\">{this.props.active}</button>\n      </form>\n    )\n  }\n}\n\nexport default SigninForm","import React, { Component } from 'react';\n\nexport default class GameCanvas extends Component {\n  componentDidMount() {\n    this.width = 300\n    this.height = 80\n    this.imgWidth = 50\n    this.contextScale = 10\n    this.elevationScale = 10\n    this.frame = 0\n\n    this.indexLast = this.props.elevation.length - 1\n    this.distanceTotal = this.indexLast * this.props.distanceToIndexRatio\n    this.distanceScale = (this.width - this.imgWidth) / this.distanceTotal\n\n    const canvas = this.refs.elevationGraph\n    canvas.width = this.width * this.contextScale\n    canvas.height = this.height * this.contextScale\n    canvas.style.width = `${this.width}px`\n    canvas.style.height = `${this.height}px`\n    \n    const context = canvas.getContext(\"2d\")\n    context.scale(this.contextScale, this.contextScale)\n    \n    const img = new Image()\n    img.src = `${process.env.PUBLIC_URL + \"/cyclist-sprite-sheet.png\"}`\n    this.spriteWidth = 400\n\n    this.timer = setInterval(() => this.drawGame(context, img), 50)\n  }\n\n  drawGame = (context, img) => {\n    context.clearRect(0, 0, context.canvas.width, context.canvas.height)\n    context.translate(0, this.height)\n\n    this.drawElevation(context)\n    \n    this.drawCyclist(context, img)\n    \n    this.drawTick(context)\n    \n    context.translate(0, -this.height)\n  }\n  \n  drawElevation = (context) => {\n    const yElevationFirst = -this.props.elevation[0] * this.elevationScale\n    const yElevationLast = -this.props.elevation[this.indexLast] * this.elevationScale\n    \n    context.beginPath();\n    context.moveTo(0, 0);\n    context.lineTo(0, yElevationFirst);\n\n    this.props.elevation.forEach((elevation, index) => {\n      const xDistance = index * this.props.distanceToIndexRatio * this.distanceScale + this.imgWidth / 2\n      const yElevation = -elevation * this.elevationScale\n      return context.lineTo(xDistance, yElevation);\n    })\n\n    context.lineTo(this.width, yElevationLast);\n    context.lineTo(this.width, 0);\n    context.fillStyle = \"#566E7A\"\n    context.fill();\n  }\n\n  drawTick = (context) => {\n    context.beginPath()\n    const xStart = this.props.distance * this.distanceScale + this.imgWidth / 2\n    context.moveTo(xStart, 0)\n    context.lineTo(xStart, -Math.max(...this.props.elevation) * this.elevationScale)\n    context.strokeStyle = \"#D20155\";\n    context.lineWidth = 2;\n    context.stroke()\n\n  }\n\n  updateFrame = () =>{\n    //Updating the frame index \n    if (this.frame + 1 > 19) {\n      this.frame = 0\n    }\n    else {\n      this.frame = (this.frame + 1); \n    }\n    \n    //Calculating the x coordinate for spritesheet \n    return this.frame * 400; \n  }\n\n  drawCyclist = (context, img) => {\n    // translate canvas origin to point of rotation\n    const xTranslate = this.props.distance * this.distanceScale + this.imgWidth / 2\n    const yTranslate = -(this.props.elevationAndSlope.elevation * this.elevationScale)\n    context.translate(xTranslate, yTranslate);\n\n    const angle = -Math.atan(this.props.elevationAndSlope.slope * this.elevationScale / this.distanceScale)\n    context.rotate(angle)\n\n    const xSrc = this.props.img === \"/cyclist.png\" ? 0 : this.updateFrame()\n\n    // position top left point of image so that bottom middle of the image is at origin\n    const x = -this.imgWidth / 2\n    const y = -this.imgWidth\n    context.drawImage(img, xSrc, 0, this.spriteWidth, this.spriteWidth, x, y, this.imgWidth, this.imgWidth);\n    \n    context.rotate(-angle)\n    context.translate(-xTranslate, -yTranslate);\n  }\n\n  componentWillUnmount () {\n    clearInterval(this.timer)\n  }\n\n  render() {\n    if (this.props.distance > 100) {\n      clearInterval(this.timer)\n    }\n\n    return (\n      <canvas ref=\"elevationGraph\"/>\n    )\n  }\n}","import React from 'react'\n// import Chart from './Chart'\nimport GameCanvas from './GameCanvas'\n\nclass Game extends React.Component {\n\n  constructor() {\n    super()\n\n    this.cadence = 1 // s (60RPM)\n    this.forcePedal = 125 // N\n    this.lengthCrankArm = 165 //mm\n    this.radiusTire = 700 / 2 //mm\n    this.massBikeAndRider = 160 //kg\n    this.Cr = 0.004 // (coefficient of rolling friction)\n    this.Cd = 1 // (coefficient of drag)\n    this.ARider = 0.4 //m2 (frontal area of rider)\n    this.rho = 1.225 //kg/m3 (air density)\n    this.teethCog = [32, 28, 25, 22, 20, 18, 16, 14, 13, 12, 11, 9.4, 8.6, 8, 7.3]\n\n    const elevations = [[1, 1], [2, 2], [3, 3]]\n    let elevation = [1, 1, 1]\n    for (let i = 0; i < 3; i++) {\n      elevation = elevation.concat(elevations[Math.round(Math.random() * (2))])\n    }\n    this.elevation = elevation.concat([1, 1])\n\n    this.distanceToIndexRatio = 10\n\n    this.state = {\n      time: 0,\n      start: Date.now(),\n      distance: 0, //m\n      velocity: 0, //m/s\n      teethChainring: 32,\n      idxTeethCog: 0,\n      grade: 0, //deg\n      img: \"/cyclist.png\"\n    }\n  }\n\n  startTimer = () => {\n    // console.log(\"start\")\n    this.setState({\n      start: Date.now(),\n      distance: 0,\n      velocity: 0,\n      idxTeethCog: 0,\n      grade: 0,\n      img: \"/cyclist.gif\"\n    })\n\n    this.milliseconds = 1000 / 4\n    this.timer = setInterval(() => this.setState({ \n      time: Date.now() - this.state.start,\n      distance: this.getDistance(this.milliseconds),\n      velocity: this.getVelocity(),\n      grade: this.getElevationAndSlope().slope * 10\n    }), this.milliseconds)\n  }\n\n  stopTimer = () => {\n    // console.log(\"stop\")\n\n    this.createGame()\n\n    clearInterval(this.timer)\n    \n    document.getElementById(\"shift-up-btn\").disabled = true\n    document.getElementById(\"shift-down-btn\").disabled = true\n  }\n  \n  createGame = () => {    \n    let avgVelocity\n\n    if (this.state.distance === 0 && this.state.time === 0) {\n      avgVelocity = 0\n    }\n    else {\n      avgVelocity = this.state.distance / (this.state.time / 1000)\n    }\n    // console.log(\"avgVelocity\", avgVelocity)\n\n    fetch('https://shifting-gears-app-backend.herokuapp.com/api/v1/games', {\n      method: 'POST',\n      headers: {\n        'Content-type' : 'application/json',\n        'Authorization' : `Bearer ${localStorage.getItem(\"token\")}`\n      },\n      body: JSON.stringify({\n        game: {\n          user_id: this.props.userId,\n          distance: this.state.distance, //m\n          time: this.state.time / 1000, //s\n          avg_velocity: avgVelocity, //m/s\n        }\n      })\n    })\n    .then(response => {\n      if (response.ok) {\n        return response.json()\n      }\n      else {\n        throw response\n      }\n    })\n    // .then(response => console.log(response))\n    .catch(response => response.json().then(response => console.log(response)))\n  }\n\n  resetTimer = () => {\n    // console.log(\"reset\")\n    this.setState({ time: 0 })\n  }\n\n  onClickStart = (e) => {\n    if (this.state.time === 0) {\n      document.getElementById(\"start-btn\").disabled = true\n      document.getElementById(\"acceleration-p\").classList.remove(\"hide-p\")\n      document.getElementById(\"velocity-p\").classList.remove(\"hide-p\")\n      this.startTimer()\n    }\n  }\n\n  componentWillUnmount () {\n    clearInterval(this.timer)\n  }\n\n  getVelocityMax = () => {\n    return (this.state.teethChainring / this.teethCog[this.state.idxTeethCog]) * 2 * 3.14 * this.radiusTire / 1000\n  }\n  \n  getAcceleration = () => {\n    const forceForward = this.forcePedal * (this.lengthCrankArm * this.teethCog[this.state.idxTeethCog]) / (this.state.teethChainring * this.radiusTire)\n  \n    const forceResistGravity = -(this.massBikeAndRider * 9.81 * Math.sin(this.state.grade * 3.14 / 180))\n    const forceResistRolling = -(this.Cr * this.massBikeAndRider * 9.81 * Math.cos(this.state.grade * 3.14 / 180))\n    const forceResistDrag = -(0.5 * this.Cd * this.ARider * this.rho * this.state.velocity ** 2)\n    const forceResist = forceResistGravity + forceResistRolling + forceResistDrag\n  \n    const forceNet = forceForward + forceResist\n\n    return forceNet / this.massBikeAndRider\n  }\n\n  getVelocity = () => {\n    const velocityMax = this.getVelocityMax()\n    const acceleration = this.getAcceleration()\n\n    if (this.state.grade >= 0) {\n      if (this.state.velocity + acceleration <= 0 && acceleration < 0) {\n        // console.log(\"end game; velocity < 0 && acceleration < 0\")\n        this.setState({ img: \"/cyclist.png\" })\n        this.stopTimer()\n        return 0\n      }\n      else if (this.state.velocity + acceleration <= 0) {\n        // console.log(\"change to a lower gear\")\n        return 0        \n      }\n      else if (this.state.velocity + acceleration < this.state.velocity) {\n        // console.log(\"change to a lower gear\")\n        return this.state.velocity + acceleration\n      }\n      else if (this.state.velocity + acceleration <= velocityMax) {\n        // console.log(\"OK\")\n        return this.state.velocity + acceleration\n      }\n      else {\n        // console.log(\"change to a higher gear\")\n        return velocityMax\n      }\n    }\n    else {\n      if (this.state.velocity + acceleration >= velocityMax){\n        // console.log(\"change to a higher gear\")\n        return this.state.velocity + acceleration\n      }\n      else {\n        // console.log(\"OK\")\n        return this.state.velocity + acceleration\n      }\n    }\n  }\n\n  getDistance = (milliseconds) => {\n    const nextDistance = this.state.distance + this.state.velocity * milliseconds / 1000\n\n    if (nextDistance >= 100) {\n      // console.log(\"end game; distance > 100m\")\n      this.setState({ img: \"/cyclist.png\"})\n      this.stopTimer()\n    }\n\n    return this.state.distance + this.state.velocity * milliseconds / 1000\n  }\n\n  onClickShiftUp = () => {\n    if (this.state.time > 0) {\n      \n      if (this.state.idxTeethCog + 1 < this.teethCog.length) {\n        // console.log(\"shift up\")\n        this.setState({\n          idxTeethCog: this.state.idxTeethCog + 1\n        })\n      }\n\n    }\n  }\n\n  onClickShiftDown = () => {\n    if (this.state.time > 0) {\n      \n      if (this.state.idxTeethCog - 1 >= 0) {\n        // console.log(\"shift down\")\n        this.setState({\n          idxTeethCog: this.state.idxTeethCog - 1\n        })\n      }\n\n    }\n  }\n\n  getElevationAndSlope = () => {\n    \n    if (this.state.distance !== 0) {\n      const distanceIntervals = this.elevation.length - 1\n      \n      const previousIndex = Math.floor(this.state.distance / distanceIntervals)\n      const nextIndex = Math.ceil(this.state.distance / distanceIntervals)\n      \n      if (this.state.distance < 100) {\n        const previousDistance = previousIndex * this.distanceToIndexRatio\n        const nextDistance = nextIndex * this.distanceToIndexRatio\n        \n        const previousElevation = this.elevation[previousIndex]\n        const nextElevation = this.elevation[nextIndex]\n    \n        const distanceDiff = nextDistance - previousDistance\n        const elevationDiff = nextElevation - previousElevation\n\n        const slope = elevationDiff / distanceDiff\n\n        const elevation = slope * (this.state.distance - previousDistance) + previousElevation\n\n        return { elevation: elevation, slope: slope }\n      }\n      else {\n        const lastIndex = this.elevation.length - 1\n        const nextLastIndex = lastIndex - 1\n\n        const lastDistance = lastIndex * this.distanceToIndexRatio\n        const nextLastDistance = nextLastIndex * this.distanceToIndexRatio\n\n        const lastElevation = this.elevation[lastIndex]\n        const nextLastElevation = this.elevation[nextLastIndex]\n\n        const distDiff = lastDistance - nextLastDistance\n        const elevDiff = lastElevation - nextLastElevation\n\n        const lastSlope = elevDiff / distDiff\n\n        return { elevation: lastElevation, slope: lastSlope }\n      }\n    }\n    else {\n      return { elevation: 1, slope: 0 }\n    }\n    \n  }\n\n  render() {\n    // console.log(\"this.state\", this.state)\n\n    // const imgCyclistStyle = {\n    //   left: -115 + this.state.distance * 2.35,\n    //   top: 40 - this.getElevationAndSlope().elevation * 9.25,\n    //   transform: `rotate(${-Math.atan(this.getElevationAndSlope().slope) * 9.25 / 2.35}rad)`,\n    // }\n\n    return (\n      <div>\n          {/* <img className=\"img-cyclist\" src={process.env.PUBLIC_URL + this.state.img} style={imgCyclistStyle} alt=\"\" /> */}\n          {/* <Chart distance={this.state.distance} elevation={this.elevation} distanceToIndexRatio={this.distanceToIndexRatio} /> */}\n          <GameCanvas elevationAndSlope={this.getElevationAndSlope()} distance={this.state.distance} elevation={this.elevation} distanceToIndexRatio={this.distanceToIndexRatio} img={this.state.img} />\n          <p>\n            <button className=\"btn shadow-sm btn-sm\" id=\"start-btn\" onClick={this.onClickStart}>Start</button>{\" \"}\n            <button className=\"btn shadow-sm btn-sm shift-btn\" id=\"shift-up-btn\" onClick={this.onClickShiftUp}>Shift Up</button>{\" \"}\n            <button className=\"btn shadow-sm btn-sm shift-btn\" id=\"shift-down-btn\" onClick={this.onClickShiftDown}>Shift Down</button>\n          </p>\n          <p className=\"hide-p\" id=\"acceleration-p\">acc = {Math.round(this.getAcceleration() * 100) / 100} m/s<sup>2</sup></p>\n          <p className=\"hide-p\" id=\"velocity-p\">v<sub>i</sub> = {Math.round(this.state.velocity * 100) / 100} m/s (v<sub>max</sub> = {Math.round(this.getVelocityMax() * 100) / 100} m/s)</p>\n      </div>\n    )\n  }\n}\n\nexport default Game","import React from 'react'\n\nclass Stats extends React.Component {\n\n  constructor() {\n    super()\n\n    this._isMounted = false\n\n    this.state = { stats: [] }\n  }\n\n  componentDidMount() {\n    this._isMounted = true\n    fetch('https://shifting-gears-app-backend.herokuapp.com/api/v1/games/top-10', {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization' : `Bearer ${localStorage.getItem(\"token\")}`\n      }\n    })\n    .then(response => response.json())\n    .then(response => this._isMounted ? this.setState({ stats: response }) : null)\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false\n  }\n\n  render() {\n    let rank = 0\n\n    return (\n      <div>\n        <table className=\"table table-sm table-striped table-dark\">\n          <thead>\n            <tr>\n              <th scope=\"col\">#</th>\n              <th scope=\"col\">Name</th>\n              <th scope=\"col\">Score</th>\n            </tr>\n          </thead>\n          <tbody>\n            {\n              this.state.stats.map((stat) => {\n                rank = rank + 1\n                return (\n                  <tr key={stat.id}>\n                    <th scope=\"row\">{rank}</th>\n                    <td>{stat.user.username}</td>\n                    <td>{Math.round(stat.avg_velocity * 100) / 100}</td>\n                  </tr>\n                )\n              })\n            }\n          </tbody>\n        </table>\n      </div>\n    )\n  }\n}\n\nexport default Stats","import React from 'react'\nimport '../cover.css'\nimport SigninForm from './SigninForm'\nimport Game from './Game'\nimport Stats from './Stats'\n\nclass CoverContainer extends React.Component {\n\n  state = {\n    // active: \"Sign in\",\n    // signedIn: false,\n    active: \"Game\",\n    signedIn: true,\n    userId: 0\n  }\n\n  onClickNav = (e) => {\n    const newActive = e.target\n    const oldActive = document.getElementsByClassName(\"nav-link active\")[0]\n    \n    if (newActive !== oldActive) {\n      oldActive.classList.remove(\"active\")\n      newActive.classList.add(\"active\")\n      this.updateActive(newActive.getAttribute(\"name\"))\n    }\n  }\n\n  updateActive = (newActive) => {\n    this.setState({ active: newActive })\n  }\n\n  updateSignedIn = () => {\n    this.setState({ signedIn: !this.state.signedIn })\n  }\n\n  onClickLogout = (e) => {\n    this.setState({\n      active: \"Sign in\",\n      signedIn: !this.state.signedIn,\n      userId: 0\n    })\n    document.getElementsByClassName(\"nav-link active\")[0].classList.remove(\"active\")\n    document.getElementsByClassName(\"nav-link\")[0].classList.add(\"active\")\n    localStorage.clear()\n  }\n\n  updateUserId = (userId) => {\n    this.setState({ userId: userId })\n  }\n\n  render() {\n    // console.log(\"CoverContainer: this.state => \", this.state)\n    const nav = !this.state.signedIn\n      ? (\n        <nav className=\"nav nav-masthead justify-content-center\">\n          <div className=\"nav-link active\" name=\"Sign in\" onClick={this.onClickNav}>Sign in</div>\n          <div className=\"nav-link\" name=\"Sign up\" onClick={this.onClickNav}>Sign up</div>\n          <div className=\"nav-link\" name=\"Use Incognito Mode\" onClick={this.onClickNav}>Incognito</div>\n        </nav>\n      )\n      : (\n        <nav className=\"nav nav-masthead justify-content-center\">\n          <div className=\"nav-link active\" name=\"Game\" onClick={this.onClickNav}>Game</div>\n          <div className=\"nav-link\" name=\"Stats\" onClick={this.onClickNav}>Stats</div>\n          <div className=\"nav-link\" name=\"Log out\" onClick={this.onClickLogout}>Log out</div>\n        </nav>\n      )\n\n      const main_content = !this.state.signedIn\n      ? <SigninForm active={this.state.active} updateSignedIn={this.updateSignedIn} updateActive={this.updateActive} updateUserId={this.updateUserId} />\n      : this.state.active === \"Game\" ? <Game updateActive={this.updateActive} userId={this.state.userId} /> : <Stats />\n\n    return (\n      <div className=\"cover-container d-flex w-100 h-100 p-2 mx-auto flex-column\">\n        <header className=\"masthead mb-auto\">\n          <div className=\"inner\">\n            <h4 className=\"masthead-brand\">\n              <img className=\"img-icon\" src={process.env.PUBLIC_URL + \"/icon.png\"} alt=\"\" /> Shifting Gears\n            </h4>\n            { nav }\n          </div>\n        </header>\n\n        <div className=\"d-flex justify-content-center\">\n          <main role=\"main\" className=\"inner cover\">\n            { main_content }\n          </main>\n        </div>\n\n        <footer className=\"mastfoot mt-auto\">\n          <div className=\"inner\">\n            {/* <p>Photo by Tim Foster | App by Kim Pham</p> */}\n          </div>\n        </footer>\n      </div>    \n    )\n  }\n}\n\nexport default CoverContainer","import React, { Component } from 'react';\nimport './App.css';\nimport '../node_modules/bootstrap/dist/css/bootstrap.css'\nimport CoverContainer from './components/CoverContainer'\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"App\">\n          <CoverContainer />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}